!function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=8)}({8:function(t,e,i){"use strict";function n(t){if(t.dataset.media){var e=document.querySelector(t.dataset.media);if(e)return e}for(var i=t.previousElementSibling;i;){if("audio"===i.tagName.toLowerCase()||"video"===i.tagName.toLowerCase())return i;var r=i.querySelectorAll("audio, video");if(r)return r.item(r.length-1);i=i.previousElementSibling}return t.parentElement?n(t.parentElement):null}function r(){return(r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}).apply(this,arguments)}function s(t){return t&&"string"==typeof t?(e=t.match(/\[(\d+):(\d+):(\d+\.\d+)\]/))&&4===e.length?60*parseInt(e[1])*60+60*parseInt(e[2])+parseFloat(e[3]):(e=t.match(/\[(\d+):(\d+\.\d+)\]/))&&3===e.length?60*parseInt(e[1])+parseFloat(e[2]):0:0;var e}i.r(e);var a=/\[(\d+:)?\d+:\d+\.\d+\]/,l=/^\[(\d+:)?\d+:\d+\.\d+\]/,c=/\[(\d+:)?\d+:\d+\.\d+\]$/;function o(t){for(var e=[],i=0,n=1/0;i<t.length;){var r=t.substr(i).match(a);if(r&&r[0]&&void 0!==r.index){var l=s(r[0]);r.index>0&&e.push({startsAt:n,endsAt:l,content:t.substr(i,r.index)}),n=l,i+=r.index+r[0].length}else e.push({startsAt:n,endsAt:1/0,content:t.substr(i)}),i=t.length}return e}var d=function(){function t(t,e,i){var n=this;if(this.lyricsElement=t,this.mediaElement=e,this.viewMode="clip",this.alignment="center",this.lyrics="",this.lyricsLines=[],this.handleStatusChange=function(t){var e;switch(t.type){case"play":case"playing":e="playing";break;case"pause":e="paused";break;case"waiting":e="waiting";break;case"ended":e="ended"}n.lyricsElement.classList.remove("rabbit-lyrics--playing","rabbit-lyrics--paused","rabbit-lyrics--waiting","rabbit-lyrics--ended"),e&&n.lyricsElement.classList.add("rabbit-lyrics--"+e)},this.synchronize=function(){var t=n.mediaElement.currentTime,e=!1,i=n.lyricsLines.filter((function(i){return t>=i.startsAt&&t<i.endsAt?(i.element.classList.contains("rabbit-lyrics__line--active")||(e=!0,i.element.classList.add("rabbit-lyrics__line--active")),i.content.forEach((function(e){t>=e.startsAt?e.element.classList.add("rabbit-lyrics__inline--active"):e.element.classList.remove("rabbit-lyrics__inline--active")})),!0):(i.element.classList.contains("rabbit-lyrics__line--active")&&(e=!0,i.element.classList.remove("rabbit-lyrics__line--active"),i.content.forEach((function(t){t.element.classList.remove("rabbit-lyrics__inline--active")}))),!1)}));if(e&&i.length>0){var r=(i[0].element.offsetTop+i[i.length-1].element.offsetTop+i[i.length-1].element.offsetHeight)/2;n.lyricsElement.scrollTop=r-n.lyricsElement.clientHeight/2}},this.lyricsElement.rabbitLyrics)return this.lyricsElement.rabbitLyrics;this.lyricsElement.rabbitLyrics=this,Object.assign(this,this.getOptionsFromAttributes()),i&&Object.assign(this,i),this.render(),this.lyricsElement.scrollTop=0,this.mediaElement.addEventListener("timeupdate",this.synchronize),this.mediaElement.addEventListener("play",this.handleStatusChange),this.mediaElement.addEventListener("playing",this.handleStatusChange),this.mediaElement.addEventListener("pause",this.handleStatusChange),this.mediaElement.addEventListener("waiting",this.handleStatusChange),this.mediaElement.addEventListener("ended",this.handleStatusChange)}var e=t.prototype;return e.setLyrics=function(t){this.lyrics=t,this.render()},e.setAlignment=function(t){this.alignment=t,this.lyricsElement.classList.remove("rabbit-lyrics--center","rabbit-lyrics--left","rabbit-lyrics--right"),this.lyricsElement.classList.add("rabbit-lyrics--"+this.alignment)},e.setViewMode=function(t){this.viewMode=t,this.lyricsElement.classList.remove("rabbit-lyrics--clip","rabbit-lyrics--full","rabbit-lyrics--mini"),this.lyricsElement.classList.add("rabbit-lyrics--"+this.viewMode)},e.render=function(){var t=this;this.lyricsElement.classList.add("rabbit-lyrics"),this.lyricsElement.classList.add("rabbit-lyrics--"+this.viewMode),this.lyricsElement.classList.add("rabbit-lyrics--"+this.alignment),this.lyricsElement.textContent=null,this.lyricsLines=function(t){for(var e=t.trim().split(/\r\n|\n|\r/).map((function(t){return t.trim()})),i=[],n=0;n<e.length;n++){var r=e[n],a=r.match(l),d=r.match(c),m=a?s(a[0]):1/0,h=d?s(d[0]):1/0,u=o(r);i.push({startsAt:m,endsAt:h,content:u})}return function(t){for(var e=1/0,i=t.length-1;i>=0;i--){t[i].endsAt===1/0?t[i].endsAt=e:e=t[i].endsAt;for(var n=t[i].content.length-1;n>=0;n--)t[i].content[n].endsAt===1/0?t[i].content[n].endsAt=e:e=t[i].content[n].endsAt,t[i].content[n].startsAt!==1/0&&(e=t[i].content[n].startsAt);t[i].startsAt!==1/0&&(e=t[i].startsAt)}}(i),function(t){for(var e=1/0,i=0;i<t.length;i++){t[i].startsAt===1/0?t[i].startsAt=e:e=t[i].startsAt;for(var n=0;n<t[i].content.length;n++)t[i].content[n].startsAt===1/0?t[i].content[n].startsAt=e:e=t[i].content[n].startsAt}}(i),i}(this.lyrics).map((function(e){var i=document.createElement("div");i.className="rabbit-lyrics__line",i.addEventListener("click",(function(){t.mediaElement.currentTime=e.startsAt,t.synchronize()}));var n=e.content.map((function(t){var e=document.createElement("span");return e.className="rabbit-lyrics__inline",e.textContent=t.content,i.append(e),r({},t,{element:e})}));return t.lyricsElement.append(i),r({},e,{content:n,element:i})})),this.synchronize()},e.getOptionsFromAttributes=function(){var t,e={};return null!=(t=this.lyricsElement.textContent)&&t.trim()&&(e.lyrics=this.lyricsElement.textContent.trim()),this.lyricsElement.dataset.viewMode&&(e.viewMode=this.lyricsElement.dataset.viewMode),this.lyricsElement.dataset.alignment&&(e.alignment=this.lyricsElement.dataset.alignment),e},t}();!function(t,e){void 0===e&&(e={});var i=e.insertAt;if("undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===i&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}}(".rabbit-lyrics{position:relative;padding:1em 0;height:16.5em;overflow-x:hidden;overflow-y:auto;scroll-behavior:smooth;background-color:#fff;border:1px solid #ddd}.rabbit-lyrics--center{text-align:center}.rabbit-lyrics--left{text-align:left}.rabbit-lyrics--right{text-align:right}.rabbit-lyrics__line{line-height:1.5em;min-height:1.5em;padding:0 1em}.rabbit-lyrics__line--active{background-color:rgba(0,0,0,.1)}.rabbit-lyrics__inline--active{color:#04a8a8}.rabbit-lyrics--mini{height:1.5em;overflow-y:hidden}.rabbit-lyrics--mini .rabbit-lyrics__line{display:none}.rabbit-lyrics--mini .rabbit-lyrics__line--active{display:block;background:transparent}.rabbit-lyrics--full{height:auto;overflow-y:initial}"),document.addEventListener("DOMContentLoaded",(function(){for(var t=document.getElementsByClassName("rabbit-lyrics"),e=0;e<t.length;e++){var i=t.item(e);if(i){var r=n(i);r&&new d(i,r)}}}),!1)}});